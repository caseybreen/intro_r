---
title: |
    | Introduction to R
subtitle: "Department of Sociology | University of Texas at Austin"
author: "Casey Breen"
date: 2026-01-22
format:
  revealjs:
    slide-number: true
    show-slide-number: all
---

## Welcome to "Intro to `R`"

```{r}
## library packages - this will be hidden 
library(tidyverse)
library(here)

censoc <- read_csv(here("data/censoc_numident_demo_v2.1.csv"))
```

-   Course website (if you want to learn more):

    -   [www.github.com/caseybreen/intro_r](www.github.com/caseybreen/intro_r)
    -   Slides, exercises, and solutions

## Session goals

-   Overview: why `R` is a powerful tool for social science research

. . .

-   Introduction to `R` syntax, data types, and data structures

. . .

-   Basic understanding of data manipulation and visualization

## Course agenda {.smaller}

-   Module 1: Introduction to `R`, `RStudio,` and code formats
-   Module 2: `R` programming fundamentals (syntax, operators, data types, data structures, sequencing)
-   Module 3: Working with data

# Module 1

## Introduction to `R`, `RStudio`, and code formats {.smaller}

**Learning objectives**:

-   Installing `R` and `RStudio`

-   Why `R`?

-   Understanding `R` Scripts, `R` notebooks, Quarto documents

## `R` and `RStudio`

-   `R` is a statistical programming language

    -   Download: [https://cloud.r-project.org](https://cloud.r-project.org/)

-   `RStudio` is an integrated development environment (IDE) for `R` programming

    -   Download: <http://www.rstudio.com/download>

## Why `R`?

-   Free, open source --- great for reproducibility and open science

-   Powerful language for data manipulation, statistical analysis, and publication-ready data visualizations

-   Excellent community, lots of free resources

## Data visualization

```{r, echo=FALSE, out.width='100%', fig.align='center'}
knitr::include_graphics(here("slides/session1_slides_files/figs/mobile_usage_prediction_map_nigeria.png"))
```

## Easy to simulate + plot data {.smaller}

```{r}
library(tidyverse)
```

```{r, fig.width=3, fig.height = 3, fig.align='center'}
#| echo: true
# Generate random data for x
x <- rnorm(n = 3000)
y <- 0.8 * x + rnorm(3000, 0, sqrt(1 - 0.8^2))

# Create data.frame
data_df <- data.frame(x = x, y = y)

# Generate visualization 
data_df %>% 
  ggplot(aes(x = x, y = y)) + 
  geom_point(alpha = 0.1) + 
  theme_classic()
```

## `RStudio` panes {.smaller}

```{r, echo=FALSE, fig.width=10, fig.height=7}
knitr::include_graphics(here("slides/session1_slides_files/figs/rstudio_layout.png"))
```

## Why `RStudio`?

-   **All-in-one development environment**: streamlines coding, data visualization, and workflow

-   **Extensible**: supports R --- but also Python, SQL, and Git

-   **Rich community**: eases learning and problem-solving

## Code formats: `R` Scripts vs. `R` Notebooks

-   **`R` Scripts**

    -   Simple: just code

    -   Best for simple tasks (and multi-script pipelines)

-   **`R` Notebooks (Quarto, `R` Notebook)**

    -   Integrated: Mix of code, text, and outputs for easy documentation

    -   Interactive: real-time code execution and output display

## Quarto documents {.smaller}

:::::: columns
::: {.column width="40%"}
-   "Notebook" Style: supports interactive code and text

    -   Code cells: segments for code execution

    -   Text chunks: annotations or explanations in Markdown format.

<!-- -->

-   Inline output: figures and code output display directly below the corresponding code cell
:::

::: {.column width="10%"}
:::

::: {.column width="50%"}
```{r, echo=FALSE, fig.width=10, fig.height=7}

knitr::include_graphics(here("slides/session1_slides_files/figs/quarto_doc.png"))

```
:::
::::::

## Installing packages {.smaller}

::::: columns
::: {.column width="40%"}
-   Packages: pre-built code and functions.

-   Packages are generally installed from the Comprehensive R Archive Network (CRAN)

**Install:** new packages

```{r}
#| echo: true
#| eval: false
install.packages("tidyverse")
```

**Library**: load installed packages

```{r}
#| echo: true
#| eval: false
library(tidyverse)
```
:::

::: {.column width="50%"}
```{r, echo=FALSE, fig.width=6, fig.height=10, fig.cap = "YaRrr! The Pirates Guide to R. Nathaniel D. Phillips, 2018."}
knitr::include_graphics(here("slides/session1_slides_files/figs/lightbulb_analogy.png"))
```
:::
:::::

## Running code {.smaller}

-   Run all code in a quarto document (or `R` script, or `R` notebook)

    -   Exception: install packages, quick checks in console

-   To run a single line of code in a code cell

    -   Cursor over line, **`Ctrl + Enter`** (Windows/Linux) or **`Cmd + Enter`** (Mac).

-   To run a full code cell (or script)

    -   **`Ctrl + Shift + Enter`** (Windows/Linux) or **`Cmd + Shift + Enter`** (Mac).

## Live coding demo {.smaller}

-   Demo of creating a new Quarto document and running code in a code cell
-   Your turn next...

## In-class exercise 0

-   Create a new quarto document

    -   `File -> New File -> Quarto Document -> Create`

-   Create a new code cell

    -   `Insert -> Executable cell -> R`

-   Practice running code below

```{r}
#| echo: true
3+3

print("Thank you for attending the intro to R session!")
```

# Module 2

## `R` programming fundamentals

**Learning objectives**:

-   Comprehend R objects and functions

-   Master basic syntax, including comments, assignment, and operators

-   Understand data structures and types in R

## Objects {.smaller}

::::: columns
::: {.column width="50%"}
-   Everything in R is an object
    -   **Vectors**: Ordered collection of same type

    -   **Data Frames**: Table of columns and rows

    -   **Function**: Reusable code block

    -   **List**: Ordered collection of objects
:::

::: {.column width="50%"}
```{r}
#| echo: true
## Objects in R

## Numeric like `1`, `2.5`
x <- 2.5
  
## Character: Text strings like `"hello"`
y <- "hello"

## Boolean: `TRUE`, `FALSE`
z <- TRUE

## Vectors
vec1 <- c(1, 2, 3)
vec2 <- c("a", "b", "c")

## data.frames 
df <- data.frame(vec1, vec2)
```
:::
:::::

## Functions {.smaller}

-   Built-in "base" functions

```{r}
#| echo: true
## Functions in R
result_sqrt <- sqrt(25)
result_sqrt
```

-   Custom, user-defined functions

```{r}
#| echo: true
# User-Defined Functions: Custom functions
my_function <- function(a, b) {
  return(a^2 + b)
}

my_function(2, 3)
```

-   Functions from packages

```{r}
#| echo: true
# User-Defined Functions: Custom functions

library(here) ## library package here
here() ## run custom "here" function to print out working directory 
```

## Comments

-   Use **`#`** to start a single-line comment

-   Comments are an important way to document code

```{r}
#| echo: true
## Add comments 

x <- 7 # assigns 1 to x

## the line below won't assign 12 to x because it's commented out 
# x <- 12

x
```

## Assignment operators

-   Use **`<-`** or `=` for assignment

    -   `<-` is preferred and advised for readability

-   Formally, assignment means "assign the result of the operation on the right to object on the left"

```{r}
#| echo: true
## Add comments 

x <- 7 # assigns 7 to x 

## Question: what does this do? 
y <- x 
```

## Arithmetic operators {.smaller}

-   Addition / Subtraction

```{r}
#| echo: true

## R as a calculator (# adds a comment)
## Addition 
10 + 3

## Subtraction  
4 - 2
```

-   Multiplication / division

```{r}
#| echo: true

## Multiplication  
4 * 3

## Division
12 / 6 
```

-   Exponents

```{r}
#| echo: true

## exponents 
10^2 ## or 10 ** 2 

```

## Comparison and logical operators {.smaller}

::::: columns
::: {.column width="50%"}
### Operators

```{r}
data <- data.frame(
  Operator = c("AND", "OR", "NOT", "Equal", "Not Equal", "Greater/Less Than", "Greater/Less Than or Equal", "Element-wise In"),
  Symbol = c("&", "|", "!", "==", "!=", "> or <", ">= or <=", "%in%")
)

knitr::kable(data)
```
:::

::: {.column width="50%"}
### Examples

```{r}
#| echo: true

## Logical operators 

10 == 10

9 == 10

9 < 10

"apple" %in% c("bananas", "oranges")

"apple" %in% "bananas" | "apple" %in% "apple" 

"apple" %in% "bananas" & "apple" %in% "apple" 


```
:::
:::::

## Data structures {.smaller}

-   There are lots of data structures; we'll focus on `vectors` and `data frames`.

    -   `Vectors`: One-dimensional arrays that hold elements of a single data type (e.g., all numeric or all character).

    -   `Data frames`: Two-dimensional tables where each column can have a different data type; essentially a list of vectors of equal length.

## `Vectors` and `data frames` {.smaller}

-   `Vector` example

```{r}
#| echo: true

## Vector Example 
vec_example <- c(1, 2, 3, 4, 5)

vec_example ## prints out vec_example
```

-   `Data frame` example

```{r}
#| echo: true
# Data.frame example 
example_df <- data.frame(
  ID = c(1, 2, 3, 4),
  Name = c("Alice", "Bob", "Charlie", "David"),
  Age = c(25, 30, 35, 40),
  Score = c(90, 85, 88, 76)
)

example_df ## prints out df_example 
```

```{r}
# Print the data frame
# knitr::kable(example_df)
```

## Data types {.smaller}

-   Each `vector` or `data frame` column can only contain one data type:

    -   `Numeric`: Used for numerical values like integers or decimals.

    -   `Character`: Holds text and alphanumeric characters.

    -   `Logical`: Represents binary values - TRUE or FALSE.

    -   `Factor`: Categorical data, either ordered or unordered, stored as levels.

```{r}
#| echo: true
## generate vectors 
vec1 <- c(1, 2, 3)
vec2 <- c("a", "b", "c")

## check type 
class(vec1)
class(vec2)

```

## `NA` (missing) values in `R`

-   `NA` represents missing or undefined data.

    -   Can vary by data type (e.g., `NA_character_` and `NA_integer_`)

-   **`NA`** values can affect summary statistics and data visualization.

-   What happens when you run the code below?

```{r}
#| echo: true
#| eval: false 
vec <- c(1, 2, 3, NA)
mean(vec)
```

## Generating sequences in `R` {.smaller}

-   Method 1: Manually write out sequence using `c()`

```{r}
#| echo: true
## Basic 
c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)

```

-   Method 2: Colon operator (`:`), creates sequences with increments of 1

```{r}
#| echo: true
c(1:10)
```

-   Method 3: **`seq()`** Function: More flexible and allows you to specify the **`start`**, **`end`**, and **`by`** parameters.

```{r}
#| echo: true
## seq 1-10, by = 2
seq(1, 10, by = 2)
```

## Functions {.smaller}

-   Function: Input arguments, performs operations on them, and returns a result

-   For each of the below functions, what are the:

    -   Input arguments?

    -   Operations performed?

    -   Results?

```{r}
#| echo: true

## hint: rnorm simulates random draws from a standard normal distribution  
random_draws <- rnorm(n = 5,
      mean = 0,
      sd = 1)

## find the mean 
mean(random_draws)

## find the median
median(random_draws)

## find the standard deviation 
sd(random_draws)
```

## Keyboard shortcuts {.smaller}

Insert new code cell

-   macOS: `Cmd` + `Option` + `I`

-   Windows/Linux: `Ctrl` + `Alt` + `I`

Run full code cell or script

-   macOS: `Cmd` + `Shift` + `Enter`

-   Windows/Linux: `Ctrl` + `Shift` + `enter`

Assignment operator (creates **`<-`**)

-   macOS: `option` + `-`

-   Windows/Linux: `option` + `-`

## Live coding demo

-   Assignment (e.g., `x <- 4`)

-   Logical expressions (e.g., `x > 10`)

-   Creating a basic sequence

-   Your turn next...

## In-class exercise 1

1.  Assign `x` and `y` to take values 3 and 4.
2.  Assign `z` as the product of `x` and `y`.
3.  Write code to calculate the square of 3. Assign this to a variable `three_squared`.
4.  Write a logical expression to check if `three_squared` is greater than 10.
5.  Write a logical expression testing whether `x` is *not* greater than 10. Use the `negate` symbol (`!`).

## Exercise 1 solutions {.smaller}

1.  Assign `x` and `y` to take values 3 and 4.

```{r}
#| echo: true
#| 
x <- 3
y <- 4
```

2.  Assign `z` as the product of `x` and `y`.

```{r}
#| echo: true
#| 
z <- x * y
```

3.  Calculate the square of 3 and assign it to a variable called `three_squared`.

```{r}
#| echo: true
#| 
three_squared <- 3^2
```

4.  Write a logical expression to check if `three_squared` is greater than 10.

```{r}
#| echo: true
#| 
three_squared > 10

```

5.  Write a logical expression to test whether `three_squared` is *not* greater than 10. Use the `negate` symbol (`!`).

```{r}
#| echo: true
!three_squared > 10
```

# Module 3

## Working with `vectors` and `data frames`

Learning objectives

-   Select elements from `vectors` and columns from `data frames`

-   Subset `data frames`

-   Investigate characteristics of `data frames`

## Indexing vectors

-   Basic indexing

```{r}
#| echo: true
vec <- c(1, 2, 3, 4, 5)
first_element <- vec[1]
first_element

third_element <- vec[3]
third_element
```

-   Conditional indexing

```{r}
#| echo: true
vec <- seq(5, 33, by = 2)
vec[vec > 25]
```

## Working with `data frames` {.smaller}

-   `Data frames` are the most common and versatile data structure in `R`

-   Structured as rows (observations) and columns (variables)

```{r}
#| echo: true
test_scores <- data.frame(
  id = c(1, 2, 3, 4, 5),
  name = c("Alice", "Bob", "Carol", "Dave", "Emily"),
  age = c(25, 30, 22, 28, 24),
  gender = c("F", "M", "F", "M", "F"),
  score = c(90, 85, 88, 92, 89)
)

knitr::kable(test_scores)
```

## Working with `data frames` {.smaller}

-   `head()`- looks at top rows of the `data frame`

-   `$` operator - access a column as a `vector`

```{r}
#| echo: true
#| 
## print first two rows  first row 
head(test_scores, 2)

## access name column 
test_scores$name
```

## Subsetting `data frames` {.smaller}

-   **Methods**:

    -   **`$`**: Single column by name.

    -   **`df[i, j]`**: Row **`i`** and column **`j`**.

    -   **`df[i:j, k:l]`**: Rows **`i`** to **`j`** and columns **`k`** to **`l`**.

-   **Conditional Subsetting**: **`df[df$age > 25, ]`**.

```{r}
#| echo: true
## all rows, columns 1-3 
test_scores[,1:3]

## all columns, rows 4-5 
test_scores[4:5,]
```

## Quiz

Which rows and will this return?

```{r}
#| echo: true
#| eval: false
test_scores[1:3,]
```

-   Which rows and which columns will this return?

```{r}
#| echo: true
#| eval: false
test_scores[test_scores$score >= 90, ]
```

## Answers

```{r}
#| echo: true
test_scores[1:3,]
```

```{r}
#| echo: true
test_scores[test_scores$score >= 90, ]

```

## Explore `data frame` characteristics

Check number of rows

```{r}
#| echo: true
## check number of rows (observations)
nrow(test_scores)
```

Check number of columns

```{r}
#| echo: true
## check number of columns (variables)
ncol(test_scores)
```

Check column names

```{r}
#| echo: true
names(test_scores)
```

# Module 5

## Data manipulation and visualization

Learning objectives

-   Overview of `tidyverse` suite of packages

-   Fundamentals of data manipulation with `dplyr`

-   Data visualization with `ggplot`

## Tidyverse

::::: columns
::: {.column width="50%"}
-   Packages: Collection of R packages designed for data science.
-   Data manipulation: Simplifies data cleaning and transformation with `dplyr`.
-   Data Visualization: Enables advanced plotting with `ggplot2`.
:::

::: {.column width="50%"}
```{r, echo=FALSE, fig.width=6, fig.height=10}
knitr::include_graphics(here("slides/session2_slides_files/figs/tidyverse_fig.png"))
```
:::
:::::

## Data Manipulation using `dplyr` {.smaller}

`filter`: Select rows based on conditions.

```{r}
#| echo: true
#| eval: false

filtered_df <- filter(df, age > 21)
```

`select`: Choose specific columns

```{r}
#| echo: true
#| eval: false

filtered_df <- select(df)
```

`mutate`: Add or modify columns

```{r}
#| echo: true
#| eval: false

df <- mutate(df, age_next_year = age + 1)
```

`summarize` or `summarise`: Aggregate or summarize data based on some criteria

```{r}
#| echo: true
#| eval: false

filtered_df <- summarize(df, mean(age))
```

`group_by`: Group data by variables. Often used with `summarise()`.

```{r}
#| echo: true
#| eval: false
filtered_df <- df %>% 
  group_by(gender) %>% 
  summarize(mean(age))
```

## The Pipe Operator `%>%` (or `|>` ) in R

-   Takes the output of one function and passes it as the first argument to another function

    -   "And then do..."

-   What's the below code doing?

```{r}
#| echo: true
#| eval: false
filtered_df <- df %>% 
  group_by(gender) %>% 
  summarize(mean(age))
```

# Recoding values in R

-   Sometime you want to recode a variable to take different values (e.g., recoding exact income to binary high/low income variable)

-   The `case_when()` function in `R` is part of the `dplyr` package and is used for creating new variables based on multiple conditions:

```{r}
#| echo: true
#| eval: false 
df_new <- df %>% 
  mutate(new_var = case_when(
  condition1 ~ value1,
  condition2 ~ value2,
  TRUE ~ value_otherwise
))
```

## Live coding demo

-   Filter data

-   Selecting data

-   Calculating summary statistics by group

-   Creating and recoding variables

## Your turn

```{r}
#| echo: true
#| eval: false 
# install.packages(tidyverse) ## you only need to do this once! 
library(tidyverse)
```

```{r}
#| echo: true
#| eval: true 
## load a built in dataset 
data(diamonds, package = "ggplot2")

## print first few rows 
head(diamonds)
```

## Data Visualization (Distn of carats)

```{r}
#| echo: true
#| eval: true 
## make a histogram of that distribution of carats 
ggplot(data = diamonds) + 
  geom_histogram(aes(x = carat))
```

## Data Visualization (Carat vs. Price)

```{r}
#| echo: true
#| eval: true 
## plot relationship between carats and price 
ggplot(data = diamonds) + 
  geom_point(aes(x = carat, y = price))
```

## Exercise

1.  Make a histogram of the price of diamonds

2.  For diamonds great than 1 carat (hint: `filter()`), what is average price by `cut` (hint: `group_by` + `summarize`?

3.  Assign your answer from (2) to a data.frame called `price_by_cut`. Now use `ggplot()` + `geom_col` to visualize this.

## Solutions Q1

```{r}
#| echo: true
#| eval: true 
## Price of diamonds 
ggplot(data = diamonds) + 
  geom_histogram(aes(x = price))
```

## Solutions Q2

```{r}
#| echo: true
#| eval: true 

## Price by cut 
price_by_cut <- diamonds %>% 
  filter(carat > 1) %>% 
  group_by(cut) %>% 
  summarize(mean_price = mean(price))
```

## Solutions Q3

```{r}
#| echo: true
#| eval: true 

## Visualize 
ggplot(data = price_by_cut) + 
  geom_col(aes(y = mean_price, x = cut, fill = cut))
```

## Resources for learning more

1.  R for data science (<https://r4ds.hadley.nz/>)

2.  Data visualization: a practical introduction (<https://socviz.co/>)

## Turn in your lab!

Please turn in your Qmd file (whatever you have completed) on Canvas so you can get credit.
